# nlohmann::json 控制float/double精度的方法

nlhmann::json里浮点类型统一为double，因此在序列化float类型的数值时会发生一次类型转换，
导致序列化出的浮点数小数点后的位数错乱，比如：

```
float value = 1.0;
nlohmann::json root;
root["val"] = value;
//get：
{
  "val":0.99999999998
}
```

一个比较暴力的解决办法，序列化前统一裁剪掉

```
//json.hpp::5606 更改为

template<typename BasicJsonType, typename FloatType,
         enable_if_t<std::is_floating_point<FloatType>::value, int> = 0>
inline void to_json(BasicJsonType& j, FloatType val) noexcept
{
    external_constructor<value_t::number_float>::construct(j, round(static_cast<typename BasicJsonType::number_float_t>(val) * 10000.0) / 10000.0);
}

//原本：
//    external_constructor<value_t::number_float>::construct(j, static_cast<typename BasicJsonType::number_float_t>(val));
```
按照喜好控制保留的小数位数
